$(document).ready(function(){let $price_donate=$("#price_donate");let $price_suggested=$(".price_donate_suggested");let $price_suggested_donation_buttons=$(".donation_button:not(.donation_button_snippets)");$price_suggested.on("click",function(ev1){$price_donate.val($(this).data("price")).trigger("change");$price_suggested_donation_buttons.removeClass("btn-primary").addClass("btn-default");if($(this).hasClass("donation_button")&&!$(this).hasClass("donation_button_snippets")){$(this).removeClass("btn-default").addClass("btn-primary")}$price_donate.removeClass("btn-primary")});$price_donate.on("keypress",function(ev1){$price_suggested_donation_buttons.removeClass("btn-primary").addClass("btn-default");$price_donate.addClass("btn-primary")});if($("#payment_intervals").data("auto-recompute-price-donate")){$("input[name='payment_interval_id']").on("click",function(ev){if($(this).attr("data-checked-before")==="1"){}else{let former_payment_interval=$("input[name='payment_interval_id'][data-checked-before='1']");let former_months=parseInt(former_payment_interval.attr("data-payment-interval-length-in-months"));let $price_donate=$("input#price_donate");let former_price_donate_value=parseFloat($price_donate.attr("data-value-float"));if(!former_price_donate_value){former_price_donate_value=parseFloat($("input#price_donate").val())}let current_months=parseInt($(this).attr("data-payment-interval-length-in-months"));former_payment_interval.removeAttr("data-checked-before");if(former_months&&former_price_donate_value&&current_months){let current_price_donate_value=former_price_donate_value/former_months*current_months;let current_price_donate_value_rounded=Math.round((current_price_donate_value+Number.EPSILON)*100)/100;$("input#price_donate").val(current_price_donate_value_rounded).trigger("change");$("input#price_donate").attr("data-value-float",current_price_donate_value)}}$(this).attr("data-checked-before","1")});$("select[name='payment_interval_id']").on("click change input",function(ev){let $selected_option=$("select[name='payment_interval_id'] option:selected");if($selected_option.attr("data-checked-before")==="1"){}else{let former_payment_interval=$("select[name='payment_interval_id'] option[data-checked-before='1']");let former_months=parseInt(former_payment_interval.attr("data-payment-interval-length-in-months"));let $price_donate=$("input#price_donate");let former_price_donate_value=parseFloat($price_donate.attr("data-value-float"));if(!former_price_donate_value){former_price_donate_value=parseFloat($("input#price_donate").val())}let current_months=parseInt($selected_option.attr("data-payment-interval-length-in-months"));former_payment_interval.removeAttr("data-checked-before");if(former_months&&former_price_donate_value&&current_months){let current_price_donate_value=former_price_donate_value/former_months*current_months;let current_price_donate_value_rounded=Math.round((current_price_donate_value+Number.EPSILON)*100)/100;$("input#price_donate").val(current_price_donate_value_rounded).trigger("change");$("input#price_donate").attr("data-value-float",current_price_donate_value)}}$selected_option.attr("data-checked-before","1")});$("input#price_donate").on("propertychange change click keyup input paste",function(ev){$(this).removeAttr("data-value-float")})}$("input[name='payment_interval_id'][checked]").ready(function(){$("input[name='payment_interval_id'][checked]").trigger("click")});$("select[name='payment_interval_id']").ready(function(){$("select[name='payment_interval_id'] option:selected").trigger("change")});let $radio_payint=$("input[name='payment_interval_id']");$radio_payint.on("click",function(ev){if($(this).attr("data-payment-interval-external-id")!="website_sale_donate.once_only"){$("[data-recurring-transactions='False']").addClass("hidden");if(!$("#payment_method li.active:not(.hidden)").length){$('#payment_method li:not(.hidden) a[role="tab"]:first').trigger("click")}}else{$("[data-recurring-transactions='False']").removeClass("hidden")}});let $select_payint=$("select[name='payment_interval_id']");$select_payint.on("change",function(ev){let data_payment_interval_external_id=$("select[name='payment_interval_id'] option:selected").attr("data-payment-interval-external-id");if(data_payment_interval_external_id!="website_sale_donate.once_only"){$("[data-recurring-transactions='False']").addClass("hidden");if(!$("#payment_method li.active:not(.hidden)").length){$('#payment_method li:not(.hidden) a[role="tab"]:first').trigger("click")}}else{$("[data-recurring-transactions='False']").removeClass("hidden")}});let $payment=$("#payment_method");$('#payment_method a[role="tab"]').on("click",function(e){$('ul[role="tablist"]').find("input[name='acquirer']:checked").removeAttr("checked");$(this).find("input[name='acquirer']").prop("checked",true);let payment_id=$(this).find("input[name='acquirer']").val();$("div.tab-content div[data-id] input",$payment).attr("disabled","true");$("div.tab-content div[data-id='"+payment_id+"'] input",$payment).removeAttr("disabled")});$payment.on("click",'button[type="submit"],button[name="submit"]',function(ev){console.log("Mike Acquirer Submit Button: preventDefault stopPropagation");ev.preventDefault();ev.stopPropagation();let $form=$(ev.currentTarget).parents("form");let acquirer_id=$(ev.currentTarget).parents("div.acquirer_button_not_opc").first().data("id");if(!acquirer_id){console.log("Mike: No acquirer ID");return false}openerp.jsonRpc("/shop/payment/transaction/"+acquirer_id,"call",{}).then(function(data){console.log("Mike: /shop/payment/transaction/ REPLACE PAY-NOW-BUTTON FORM DATA:"+data);$form.html(data);console.log("Mike: SU/shop/payment/transaction/ SUBMIT PAY-NOW-BUTTON FORM");$form.submit()})});let maxHeight=0;$(".tab-content.tab-equal-heights .tab-pane").each(function(){let height=$(this).height();maxHeight=height>maxHeight?height:maxHeight});$(".tab-content.tab-equal-heights").height(maxHeight)});