(function(){"use strict";openerp.website.EditorBar=openerp.website.EditorBar.extend({edit:function(){$("body .ckediting_disabled").attr("contenteditable","false");$("body .ckediting_enabled").attr("contenteditable","true");$("#email_template_settings").collapse("show");$("#email_template_settings").addClass("in");return this._super.apply(this,arguments)}});openerp.website.editor.RTELinkDialog=openerp.website.editor.RTELinkDialog.extend({bind_data:function(){console.log("bind_data()");var classes=null;classes=this.element&&this.element.getAttribute("class")||"";var donottrack=classes.indexOf("link-donottrack")!==-1;var withtoken=classes.indexOf("link-withtoken")!==-1;this.$("input[class='link-donottrack']").prop("checked",donottrack);this.$("input[class='link-withtoken']").prop("checked",withtoken);var result=null;result=this._super();return result},make_link:function(url,new_window,label,classes){console.log("make_link(): "+classes);classes=classes.replace(/undefined/g,"")||"";classes=classes.replace(/\s{2,}/g," ").trim();if(this.$("input[class='link-donottrack']").prop("checked")){classes+=" link-donottrack"}else{classes=classes.replace(/link-donottrack/g,"")}if(this.$("input[class='link-withtoken']").prop("checked")){classes+=" link-withtoken"}else{classes=classes.replace(/link-withtoken/g,"")}classes=classes.replace(/\s{2,}/g," ").trim();return this._super(url,new_window,label,classes)}});openerp.website.editor.RTEImageDialog=openerp.website.editor.RTEImageDialog.extend({start:function(){console.log("ImageDialog start()",this.media);$("input#input_img_alt_text").val($(this.media).attr("alt"));return this._super()},select_existing:function(e){console.log("ImageDialog select_existing():",this);var link=$(e.currentTarget).attr("src");if(link){$("#wedi_selected_image").attr("src",link)}return this._super(e)},selected_existing:function(link){console.log("ImageDialog selected_existing():",this);return this._super(link)},set_image:function(url,error){console.log("ImageDialog set_image():",this);if(url)$("#wedi_selected_image").attr("src",url);return this._super(url,error)},save:function(){console.log("ImageDialog save():",this);$(this.media).attr("alt",$("input#input_img_alt_text").val());return this._super()}})})();